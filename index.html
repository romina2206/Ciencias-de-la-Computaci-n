<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Primera Ley de Newton – Inercia (3D)</title>

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f7f7f7;
  }

  h1 {
    padding: 15px;
    color: #5A2382;
  }

  #ui {
    position: absolute;
    top: 80px;
    left: 20px;
    background: white;
    padding: 15px;
    border-radius: 10px;
    width: 260px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.15);
  }

  button {
    width: 100%;
    padding: 10px;
    background: #E6500F;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
  }
</style>
</head>

<body>

<h1>Primera Ley de Newton – Inercia</h1>

<div id="ui">
  <p>Si no actúa una fuerza neta,<br>el movimiento no cambia.</p>

  <label>
    <input type="checkbox" id="friccion" checked>
    Con fricción
  </label>

  <br><br>
  <button onclick="empujar()">Empujar</button>
</div>

<!-- THREE CLÁSICO -->
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.js"></script>

<script>
let scene, camera, renderer, controls;
let cube;
let velocity = 0;

init();
animate();

function init() {
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0xf0f0f0);

  camera = new THREE.PerspectiveCamera(
    60,
    window.innerWidth / window.innerHeight,
    0.1,
    100
  );
  camera.position.set(6, 5, 8);
  camera.lookAt(0, 0, 0);

  renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.target.set(0, 0.5, 0);

  scene.add(new THREE.AmbientLight(0xffffff, 0.6));

  const light = new THREE.DirectionalLight(0xffffff, 0.6);
  light.position.set(5, 10, 5);
  scene.add(light);

  // PISO GRANDE (no se corta)
  const floor = new THREE.Mesh(
    new THREE.PlaneGeometry(50, 50),
    new THREE.MeshStandardMaterial({ color: 0xcccccc })
  );
  floor.rotation.x = -Math.PI / 2;
  floor.position.y = 0;
  scene.add(floor);

  // CUBO
  cube = new THREE.Mesh(
    new THREE.BoxGeometry(1, 1, 1),
    new THREE.MeshStandardMaterial({ color: 0x0087C8 })
  );
  resetCube();
  scene.add(cube);

  window.addEventListener("resize", onResize);
}

function resetCube() {
  cube.position.set(0, 0.5, 0);
  velocity = 0;
}

function empujar() {
  resetCube();          // SIEMPRE vuelve al inicio
  velocity = 0.15;
}

function animate() {
  requestAnimationFrame(animate);

  if (velocity > 0) {
    cube.position.x += velocity;

    if (document.getElementById("friccion").checked) {
      velocity -= 0.003;
      if (velocity < 0) velocity = 0;
    }
  }

  controls.update();
  renderer.render(scene, camera);
}

function onResize() {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
}
</script>

</body>
</html>
